---
title: "440minicase1_rmd"
output: html_document
date: "2024-09-05"
---

```{r}
library(readxl)
library(dplyr)
```

```{r}
survey <- read_excel("Durham_2022_Resident_Survey_Raw_Data (1).xlsx")
```

```{r}
#RESPONSE: Perceived resident ratings of Durham as a place to live (Q24)
  #Q24 has 10 parts, each a rating of 1-5, with 9 meaning N/A
    #thus we shall create a variable which is simply a total of this; if value of 9, change to zero; sum all values

#EXPLORE ASSOCIATION WITH: length of time residents have lived in Durham (Q27)

#ADJUST FOR:
              #resident's total annual household income (Q33)
                #this variable is ordinal
              #whether monthly housing costs (rent or mortgage) exceed 30% of the resident's monthly income (Q9.1)
                #this variable is binary (theoretically, but it includes a third value for N/A)
              #other variables (existing or derived)
```

```{r}
survey$`Q24[01] [01  As a place to live]`[survey$`Q24[01] [01  As a place to live]` == 9] <- 0
survey$`Q24[02] [02  As a place to work]`[survey$`Q24[02] [02  As a place to work]` == 9] <- 0
survey$`Q24[03] [03  As a place to play]`[survey$`Q24[03] [03  As a place to play]` == 9] <-0
survey$`Q24[04] [04  As a place to raise childre`[survey$`Q24[04] [04  As a place to raise childre` == 9] <- 0
survey$`Q24[05] [05  As a place to educate child`[survey$`Q24[05] [05  As a place to educate child` == 9] <- 0
survey$`Q24[06] [06  As a place to retire]`[survey$`Q24[06] [06  As a place to retire]` == 9] <- 0
survey$`Q24[07] [07  As a place to visit]`[survey$`Q24[07] [07  As a place to visit]` == 9] <- 0
survey$`Q24[08] [08  As a place to start a busin`[survey$`Q24[08] [08  As a place to start a busin` == 9] <- 0
survey$`Q24[09] [09  As a community that is movi`[survey$`Q24[09] [09  As a community that is movi` == 9] <- 0
survey$`Q24[10] [10  As a community that values`[survey$`Q24[10] [10  As a community that values` == 9] <- 0

#create rating variable which is total of all 10 parts of Q24
#ASSUMPTION: the N/A values are independent of rating (i.e. observations of people who would rate Durham as a bad place to live are equally as likely to contain N/A values as observations of people who would rate Durham as a good place to live)
survey <- survey %>%
  mutate(rating = `Q24[01] [01  As a place to live]` +
           `Q24[02] [02  As a place to work]` +
           `Q24[03] [03  As a place to play]` +
           `Q24[04] [04  As a place to raise childre` +
           `Q24[05] [05  As a place to educate child` +
           `Q24[06] [06  As a place to retire]` +
           `Q24[07] [07  As a place to visit]` +
           `Q24[08] [08  As a place to start a busin` +
           `Q24[09] [09  As a community that is movi` +
           `Q24[10] [10  As a community that values`)
```

```{r}
length(survey$`Q33  Would you say your total annual hou`[survey$`Q33  Would you say your total annual hou` == 9])
length(survey$`Q9[01]  [1  Do your monthly housing cost`[survey$`Q9[01]  [1  Do your monthly housing cost` == 9])
```

```{r}
#I want to include missing values for both Q33 and Q9.1 because there are a significant number of missing values for them both
#Q33 is an ordinal variable, but a "Missing" category would not fit into the ranking structure, so I will simply treat Q33 as a non-ordinal categorical variable
basemod <- lm(rating ~ as.factor(`Q33  Would you say your total annual hou`) + as.factor(`Q9[01]  [1  Do your monthly housing cost`), data = survey)
summary(basemod)
```

```{r}
#EDA for other potential predictors
```

```{r}
#full model with time lived in Durham as predictor
```

```{r}
#F-test
```

